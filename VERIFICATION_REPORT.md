# 前後端連接驗證報告

## 測試時間
$(date)

## 1. Supabase 資料庫檢查

### 連接狀態
- ✅ Supabase URL: `https://kwxlxjfcdghpguypadvi.supabase.co`
- ✅ API Key: 已配置
- ✅ 連接測試: 成功

### 資料檢查
執行以下命令檢查資料：

```bash
curl -X GET "https://kwxlxjfcdghpguypadvi.supabase.co/rest/v1/registrations?select=*&order=created_at.desc" \
  -H "apikey: [YOUR_KEY]" \
  -H "Authorization: Bearer [YOUR_KEY]"
```

或在 Supabase Dashboard 查看：
https://supabase.com/dashboard/project/kwxlxjfcdghpguypadvi/editor

## 2. 後台提交功能測試

### 測試步驟
1. 訪問後台登入頁面：`http://localhost:5174/admin/login`
2. 登入管理員帳號
3. 點擊「提交名單」Tab
4. 填寫表單並提交

### 預期結果
- ✅ 表單可以正常提交
- ✅ 資料寫入 Supabase
- ✅ 提交後立即出現在「名單管理」中

### 驗證方式
在「名單管理」Tab 中應該能看到：
- 報名編號（格式：`ADMIN-XXXXXX`）
- 聯絡人姓名
- 報名類型
- 管理員備註（如果有）

## 3. 前端報名功能測試

### 測試步驟
1. 訪問報名頁面：`http://localhost:5174/register`
2. 填寫報名表單
3. 提交報名

### 預期結果
- ✅ 表單可以正常提交
- ✅ 資料寫入 Supabase
- ✅ 顯示成功頁面

### 驗證方式
在後台「名單管理」中應該能看到：
- 報名編號（格式：`DINE-0303-XXXX`）
- 聯絡人姓名
- 報名類型
- 沒有管理員備註（前端提交的）

## 4. 前後端整合驗證

### 檢查點

#### ✅ 資料庫連接
- [ ] Supabase 連接正常
- [ ] 可以讀取資料
- [ ] 可以寫入資料

#### ✅ 後台功能
- [ ] 可以登入後台
- [ ] 可以查看名單
- [ ] 可以提交名單
- [ ] 提交的資料出現在列表中

#### ✅ 前端功能
- [ ] 可以訪問報名頁面
- [ ] 可以填寫表單
- [ ] 可以提交報名
- [ ] 提交成功後顯示成功頁面

#### ✅ 資料同步
- [ ] 後台提交的資料可以在「名單管理」中看到
- [ ] 前端提交的資料可以在「名單管理」中看到
- [ ] 兩邊的資料都在同一個資料庫中

## 5. 測試腳本

### 瀏覽器測試
打開 `test_full_workflow.js` 在瀏覽器控制台執行：
```javascript
testFullWorkflow()
```

### 手動測試
1. **後台提交測試**
   - 登入後台
   - 點擊「提交名單」
   - 填寫並提交
   - 檢查「名單管理」中是否出現

2. **前端報名測試**
   - 訪問報名頁面
   - 填寫表單
   - 提交
   - 在後台「名單管理」中檢查

## 6. 常見問題排查

### 問題：後台提交後看不到資料
**檢查：**
1. 查看瀏覽器控制台是否有錯誤
2. 檢查 Supabase Dashboard 中是否有資料
3. 確認 RLS 策略是否正確

### 問題：前端提交失敗
**檢查：**
1. 查看瀏覽器控制台錯誤訊息
2. 檢查表單驗證是否通過
3. 確認 Supabase 連接是否正常

### 問題：資料不同步
**檢查：**
1. 確認前後端使用同一個 Supabase 專案
2. 檢查 `.env` 文件中的 URL 和 Key
3. 確認資料庫表結構是否正確

## 7. 驗證清單

- [ ] Supabase 資料庫有資料
- [ ] 後台可以提交名單
- [ ] 後台提交的資料出現在列表中
- [ ] 前端可以報名
- [ ] 前端報名的資料出現在後台列表中
- [ ] 前後端使用同一個資料庫
- [ ] 資料可以正常讀寫
